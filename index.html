<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NQTL3S6Q');</script>
<!-- End Google Tag Manager -->
<title>Handy &amp; Friend | Los Angeles Handyman</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=DM+Sans:wght@400;500;600;700&display=swap" as="style">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="assets/css/main.css?v=6">

<meta name="description" id="metaDesc" content="Handy &amp; Friend ‚Äî handyman services &amp; home repair in Los Angeles, CA 90038. TV Mounting, Furniture Assembly, Painting, Flooring. Labor only, upfront pricing. Call 2133611700.">
<meta name="robots" content="index,follow">
<link rel="canonical" href="https://handyandfriend.com/">

<meta property="og:title" id="ogTitle" content="Handy &amp; Friend | Los Angeles Handyman">
<meta property="og:description" id="ogDesc" content="Premium labor-only handyman. Same-week availability. Call or WhatsApp for a quote.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://handyandfriend.com/">
<meta property="og:image" content="https://handyandfriend.com/assets/img/og.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:locale" id="ogLocale" content="en_US">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" id="twTitle" content="Handy &amp; Friend | Los Angeles Handyman">
<meta name="twitter:description" id="twDesc" content="Premium labor-only handyman. Same-week availability. Call or WhatsApp for a quote.">
<meta name="twitter:image" content="https://handyandfriend.com/assets/img/og.jpg">

<meta name="theme-color" content="#1a1a1a">
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="manifest" href="manifest.webmanifest">
<meta name="recaptcha-site-key" content="6Le1C3gsAAAAAGTzWCcplce_QCITlw1vcqQXjqEy">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z05XJ8E281"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-Z05XJ8E281');

  var recaptchaMeta = document.querySelector('meta[name="recaptcha-site-key"]');
  window.HF_RECAPTCHA_SITE_KEY = window.HF_RECAPTCHA_SITE_KEY || (recaptchaMeta ? recaptchaMeta.content.trim() : '');
  if (window.HF_RECAPTCHA_SITE_KEY) {
    var rc = document.createElement('script');
    rc.src = 'https://www.google.com/recaptcha/api.js?render=' + encodeURIComponent(window.HF_RECAPTCHA_SITE_KEY);
    rc.async = true;
    document.head.appendChild(rc);
  }
</script>

<!-- Meta Pixel -->
<script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '741929941112529');
  fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=741929941112529&ev=PageView&noscript=1"
/></noscript>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HomeAndConstructionBusiness",
  "name": "Handy & Friend",
  "url": "https://handyandfriend.com/",
  "telephone": "+12133611700",
  "email": "2133611700c@gmail.com",
  "priceRange": "$$",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Los Angeles",
    "addressRegion": "CA",
    "postalCode": "90038",
    "addressCountry": "US"
  },
  "areaServed": [
    {"@type":"PostalAddress","postalCode":"90038"},
    {"@type":"PostalAddress","postalCode":"90046"},
    {"@type":"PostalAddress","postalCode":"90048"},
    {"@type":"PostalAddress","postalCode":"90069"},
    {"@type":"PostalAddress","postalCode":"90210"}
  ],
  "serviceArea": {
    "@type": "GeoCircle",
    "geoMidpoint": {"@type":"GeoCoordinates","latitude":34.0837,"longitude":-118.3413},
    "geoRadius": "20000"
  },
  "sameAs": [
    "https://www.yelp.com/biz/handy-and-friend",
    "https://www.facebook.com/profile.php?id=61588215297678&locale=en_US"
  ],
  "openingHoursSpecification": {
    "@type": "OpeningHoursSpecification",
    "dayOfWeek": ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],
    "opens": "08:00",
    "closes": "20:00"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.9",
    "reviewCount": "500",
    "bestRating": "5"
  },
  "paymentAccepted": "Cash, Credit Card, Venmo, PayPal",
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "Handyman Services",
    "itemListElement": [
      {"@type":"Offer","itemOffered":{"@type":"Service","name":"TV Mounting"},"priceSpecification":{"@type":"PriceSpecification","price":"150","priceCurrency":"USD","minPrice":"150"}},
      {"@type":"Offer","itemOffered":{"@type":"Service","name":"Furniture Assembly"},"priceSpecification":{"@type":"PriceSpecification","price":"150","priceCurrency":"USD","minPrice":"150"}},
      {"@type":"Offer","itemOffered":{"@type":"Service","name":"Interior Painting"},"priceSpecification":{"@type":"UnitPriceSpecification","price":"2.25","priceCurrency":"USD","unitCode":"FTK","unitText":"per sq ft"}},
      {"@type":"Offer","itemOffered":{"@type":"Service","name":"Flooring Installation"},"priceSpecification":{"@type":"UnitPriceSpecification","price":"4.25","priceCurrency":"USD","unitCode":"FTK","unitText":"per sq ft"}},
      {"@type":"Offer","itemOffered":{"@type":"Service","name":"Plumbing"},"priceSpecification":{"@type":"PriceSpecification","price":"150","priceCurrency":"USD","minPrice":"150"}},
      {"@type":"Offer","itemOffered":{"@type":"Service","name":"Electrical"},"priceSpecification":{"@type":"PriceSpecification","price":"150","priceCurrency":"USD","minPrice":"150"}},
      {"@type":"Offer","itemOffered":{"@type":"Service","name":"Art & Mirror Hanging"},"priceSpecification":{"@type":"PriceSpecification","price":"150","priceCurrency":"USD","minPrice":"150"}}
    ]
  }
}
</script>
</head>

<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NQTL3S6Q"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<!-- Lightbox for service images -->
<div id="lightboxOverlay" class="lightbox-overlay">
  <div class="lightbox-container">
    <img id="lightboxImg" class="lightbox-img" src="" alt="Service image">
    <button id="lightboxClose" class="lightbox-close">&times;</button>
  </div>
</div>

<nav class="topbar">
  <div class="ti">
    <div class="brand"><span class="bdot"></span>Handy &amp; Friend</div>
    <div class="sp"></div>
    <button class="lbtn" id="langBtn" title="Change language" data-i18n-title="langBtnTitle">
      üåê <span id="langTxt">EN</span><span id="langNext" style="opacity:.55;font-size:9px;font-weight:600"> ‚Üí ES</span>
    </button>
  </div>
</nav>

<div class="hero">
  <div class="hbg"></div>
  <!-- Hero offer headline -->
  <div class="hero-headline">
    <p class="hero-offer-eyebrow">Los Angeles ¬∑ Professional &amp; Insured</p>
    <h1 class="hero-offer-title" id="heroOfferTitle">BUNDLE &amp; SAVE 20%</h1>
    <p class="hero-offer-sub" id="heroOfferSub">Book 2+ Services Today</p>
  </div>
</div>


<div class="mw">
  <div class="slbl" id="gridLbl"></div>
    <div class="bb" id="baseBanner"></div>
    <section class="seo-skeleton" aria-label="Services">
      <h2 class="seo-h2" data-i18n="servicesTitle">Services</h2>
      <ul class="seo-services">
        <li data-i18n="serviceTv">TV Mounting</li>
        <li data-i18n="serviceFurniture">Furniture Assembly</li>
        <li data-i18n="serviceArt">Art &amp; Mirrors</li>
        <li data-i18n="servicePainting">Painting</li>
        <li data-i18n="serviceFlooring">Flooring</li>
        <li data-i18n="servicePlumbing">Plumbing</li>
        <li data-i18n="serviceElectrical">Electrical</li>
      </ul>
    </section>
  <div class="rc" id="calcBox">
    <div class="cb">
      <div class="ch">
        <div class="ci">üìê</div>
        <div class="chd">
          <h3 id="calcTitle"></h3>
          <p id="calcSub"></p>
        </div>
      </div>
      <div class="cbody">
        <div class="iblk">
          <span class="ilbl" id="lSvc"></span>
          <select id="svcSel"></select>
        </div>
        <div class="mode" role="group" aria-label="Calculator mode">
          <button type="button" id="modeRoom" aria-pressed="true"></button>
          <button type="button" id="modeTotal" aria-pressed="false"></button>
        </div>
        <div class="irow" id="roomWrap">
          <div class="iblk">
            <span class="ilbl" id="lLen"></span>
            <input type="number" id="dimLen" min="1" placeholder="20" inputmode="decimal">
          </div>
          <div class="iblk">
            <span class="ilbl" id="lWid"></span>
            <input type="number" id="dimWid" min="1" placeholder="15" inputmode="decimal">
          </div>
        </div>
        <div class="iblk" id="sfWrap">
          <span class="ilbl" id="lSf"></span>
          <input type="number" id="totalSF" min="1" placeholder="300" inputmode="decimal">
        </div>
        <div class="abadge" id="areaBadge"></div>
        <div class="agroup" id="addonGroup"></div>
        <div id="bpWrap" style="display:none" class="iblk">
          <span class="ilbl" id="lBase"></span>
          <input type="number" id="baseLF" min="0" placeholder="0" inputmode="decimal">
        </div>
        <div id="flWrap" style="display:none">
          <div class="irow">
            <div class="iblk">
              <span class="ilbl" id="lTrans"></span>
              <input type="number" id="transQty" min="0" value="0" placeholder="0" inputmode="numeric">
            </div>
            <div class="iblk">
              <span class="ilbl" id="lDoorU"></span>
              <input type="number" id="doorQty" min="0" value="0" placeholder="0" inputmode="numeric">
            </div>
          </div>
        </div>
        <div class="iblk" id="hrWrap" style="display:none">
          <span class="ilbl" id="lHrs"></span>
          <input type="number" id="hoursInput" min="1" max="24" step="0.5" placeholder="2" inputmode="decimal">
        </div>
        <div class="abadge" id="hrBadge" style="display:none"></div>

        <!-- KITCHEN CABINET PAINTING -->
        <div id="kitchenWrap" style="display:none">
          <div class="iblk">
            <span class="ilbl" id="lDoorType"></span>
            <select id="doorTypeSel"></select>
          </div>
          <div class="iblk">
            <span class="ilbl" id="lDoorQtyK"></span>
            <input type="number" id="doorQtyK" min="0" value="0" placeholder="0" inputmode="numeric">
          </div>
          <div class="irow">
            <div class="iblk">
              <span class="ilbl" id="lDrawerS"></span>
              <input type="number" id="drawerSmallQty" min="0" value="0" placeholder="0" inputmode="numeric">
            </div>
            <div class="iblk">
              <span class="ilbl" id="lDrawerL"></span>
              <input type="number" id="drawerLargeQty" min="0" value="0" placeholder="0" inputmode="numeric">
            </div>
          </div>
          <div class="iblk">
            <span class="ilbl" id="lEndPanels"></span>
            <input type="number" id="endPanelQty" min="0" value="0" placeholder="0" inputmode="numeric">
          </div>
          <div class="agroup" id="kitchenAddonGroup"></div>
        </div>

        <!-- FURNITURE PAINTING -->
        <div id="furnWrap" style="display:none">
          <div class="iblk">
            <span class="ilbl" id="lPieceType"></span>
            <select id="pieceTypeSel"></select>
          </div>
          <div class="iblk">
            <span class="ilbl" id="lPieceQty"></span>
            <input type="number" id="pieceQty" min="0" value="0" placeholder="0" inputmode="numeric">
          </div>
        </div>

        <!-- FIXED-PRICE SERVICES -->
        <div id="fixedWrap" style="display:none">
          <div id="fixedCards"></div>
          <div class="iblk" id="fixedExtraWrap" style="display:none">
            <span class="ilbl" id="lFixedExtra"></span>
            <input type="number" id="fixedExtraQty" min="0" value="0" placeholder="0" inputmode="numeric">
          </div>
        </div>

        <button class="ccbtn" id="calcBtn"></button>
        <div class="cres" id="calcRes">
          <div class="rlbl" id="resLbl"></div>
          <div class="ramt" id="resAmt"></div>
          <div id="resMin" style="display:none" class="rmin">‚ö° <span id="resMinTxt"></span></div>
          <div class="rsub" id="resSub"></div>
          <div class="racts">
            <button class="rbtn" id="resWa">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none">
                <path d="M20 12a8 8 0 0 1-11.6 7.1L4 20l1.5-4.2A8 8 0 1 1 20 12z" stroke="rgba(42,31,20,0.7)" stroke-width="2" stroke-linejoin="round"/>
              </svg>
              <span id="resWaTxt"></span>
            </button>
            <button class="rbtn" id="resCopy"><span id="resCopyTxt"></span></button>
          </div>
        </div>

        <!-- SMS CAPTURE MINI-FORM (after calculator result) -->
        <div id="smsCaptureMini" style="display:none;background:#fff;padding:20px;border-radius:12px;margin-top:16px;border:1px solid #d9d1c0">
          <h3 style="font-size:14px;font-weight:700;margin-bottom:12px;color:#3a3a3a" id="smsCaptureTitle"></h3>
          <div style="display:grid;gap:10px">
            <input type="tel" id="smsPhone" placeholder="Your phone number" style="padding:12px;border:1px solid #d9d1c0;border-radius:8px;font-size:14px;font-family:inherit">
            <label style="display:flex;gap:8px;align-items:flex-start;font-size:12px;color:#666">
              <input type="checkbox" id="smsMktConsent" style="margin-top:2px;width:18px;height:18px">
              <span id="smsConsent"></span>
            </label>
            <button id="smsSendBtn" style="padding:12px;background:linear-gradient(135deg,#1B2B4B 0%,#2B4A8C 100%);color:#fff;border:none;border-radius:8px;font-weight:700;font-size:14px;cursor:pointer;transition:opacity 200ms;box-shadow:0 4px 14px rgba(27,43,75,.35)"></button>
          </div>
        </div>
      </div>
    </div>
  </div><!-- /.rc -->

  <div class="grid" id="servGrid"></div>
  <a class="calc-anchor" href="#calcBox" id="calcAnchorBtn">üìê <span id="calcAnchorTxt">Get Estimate</span></a>
</div>
<div class="pb"></div>

<div class="bar">
  <div class="barin">
    <a class="bcall" href="tel:+12133611700" data-event="click_call" title="Call 213-361-1700">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
        <path d="M6.6 10.8c1.4 2.8 3.8 5.1 6.6 6.6l2.2-2.2c.3-.3.7-.4 1-.2 1.1.4 2.3.6 3.6.6.6 0 1 .4 1 1V20c0 .6-.4 1-1 1-9.4 0-17-7.6-17-17 0-.6.4-1 1-1h3.5c.6 0 1 .4 1 1 0 1.3.2 2.5.6 3.6.1.3 0 .7-.2 1L6.6 10.8z" stroke="rgba(255,255,255,0.75)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span data-i18n="barCall">Call</span>
    </a>
    <a class="bwa" href="https://wa.me/12133611700?text=Hi%20Handy%20%26%20Friend%20I%20need%20help%20with%20a%20project" target="_blank" rel="noopener" aria-label="Message on WhatsApp" data-event="click_whatsapp">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M20 12a8 8 0 0 1-11.6 7.1L4 20l1.5-4.2A8 8 0 1 1 20 12z" stroke="#fff" stroke-width="2" stroke-linejoin="round"/>
        <path d="M9 10.5c.2-.5.4-.5.6-.5h.5c.1 0 .3 0 .4.3l.7 1.8c.1.2 0 .4-.1.5l-.4.4c.6 1.2 1.5 2 2.7 2.6l.4-.5c.1-.2.3-.2.5-.1l1.8.8c.2.1.3.3.2.5-.2.7-.8 1.5-1.6 1.7-.9.2-2-.1-3.5-.8-1.7-1-3.1-2.8-3.5-3.6-.4-.8-.3-1.8.1-2.6z" fill="#fff"/>
      </svg>
      <span data-i18n="barMessage">Message</span>
    </a>
    <a class="bpricing" href="/pricing" id="barPricingBtn" data-i18n="heroFullPricing">üí≤ Full Pricing</a>
    <a class="bemail" href="mailto:2133611700c@gmail.com" aria-label="Email">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
        <path d="M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z" stroke="rgba(255,255,255,0.75)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M22 6l-10 7L2 6" stroke="rgba(255,255,255,0.75)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </a>
  </div>
</div>


<!-- MOBILE FAB -->
<button class="calc-fab" id="calcFab" aria-label="Get Estimate">
  üìê <span id="calcFabTxt">Get Estimate</span>
</button>

<!-- MOBILE CALC BOTTOM SHEET -->
<div class="calc-sheet-overlay" id="calcSheetOverlay">
  <div class="calc-sheet" id="calcSheet">
    <div class="calc-sheet-handle"></div>
    <button class="calc-sheet-close" id="calcSheetClose" aria-label="Close">‚úï</button>
    <!-- Calculator content cloned here by JS -->
    <div id="calcSheetBody"></div>
  </div>
</div>

<script src="assets/js/main.js?v=7" defer></script>

<script>
function emitCoreEvent(eventName, params) {
  var payload = Object.assign({
    page_location: window.location.href
  }, params || {});

  if (typeof gtag === 'function') {
    gtag('event', eventName, payload);
  }
  if (typeof dataLayer !== 'undefined') {
    dataLayer.push(Object.assign({ event: eventName }, payload));
  }
}

// Event tracking for data-event attributes
document.addEventListener('DOMContentLoaded', function() {
  function trackEvent(eventName, eventParams) {
    emitCoreEvent(eventName, eventParams);
    // If Facebook Pixel is loaded, send conversion events.
    if (typeof fbq !== 'undefined') {
      fbq('track', eventName, eventParams);
    }
  }

  // Listen for clicks on elements with data-event
  document.addEventListener('click', function(e) {
    var target = e.target.closest('[data-event]');
    if (!target) return;

    var eventName = target.getAttribute('data-event');
    if (!eventName) return;
    var eventParams = {
      'event_category': 'conversion',
      'event_label': target.href || target.innerText.trim().substring(0, 100),
      'value': 1,
      'non_interaction': false
    };
    trackEvent(eventName, eventParams);
  });

  // GA4 required click events for Ads/GTM consistency
  document.addEventListener('click', function(e) {
    var link = e.target.closest('a[href]');
    if (!link) return;
    var href = (link.getAttribute('href') || '').trim();
    var linkText = (link.textContent || '').trim().slice(0, 120);

    if (href.indexOf('tel:') === 0) {
      emitCoreEvent('phone_click', { link_url: href, link_text: linkText });
      return;
    }
    if (href.indexOf('mailto:') === 0) {
      emitCoreEvent('email_click', { link_url: href, link_text: linkText });
      return;
    }
    if (href.indexOf('https://wa.me/') === 0 || href.toLowerCase().indexOf('whatsapp') !== -1) {
      emitCoreEvent('whatsapp_click', { link_url: href, link_text: linkText });
    }
  });
});
</script>

<!-- TESTIMONIALS SECTION -->
<div class="rev-section">
  <div class="rev-wrap">
    <div class="rev-head">
      <h2 class="rev-title" data-i18n="testimonialsTitle">What Our Customers Say</h2>
      <div class="rev-summary">
        <span class="rev-score">4.9</span>
        <span class="rev-stars-row">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
        <span class="rev-count" data-i18n="testimonialsSub">500+ reviews</span>
      </div>
    </div>

    <div class="rev-grid">
      <!-- Card 1 -->
      <div class="rev-card">
        <div class="rev-card-top">
          <div class="rev-avatar rev-av1">SM</div>
          <div class="rev-info">
            <div class="rev-name">Sarah M.</div>
            <div class="rev-loc">Hollywood, 90028</div>
          </div>
          <svg class="rev-glogo" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
        </div>
        <div class="rev-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
        <p class="rev-text" data-i18n="review1">"Amazing service! Fixed my TV mounting in 1 hour. Professional and quick. Highly recommend!"</p>
        <div class="rev-date">Feb 2026</div>
      </div>

      <!-- Card 2 -->
      <div class="rev-card">
        <div class="rev-card-top">
          <div class="rev-avatar rev-av2">MT</div>
          <div class="rev-info">
            <div class="rev-name">Marcus T.</div>
            <div class="rev-loc">Beverly Hills, 90210</div>
          </div>
          <svg class="rev-glogo" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
        </div>
        <div class="rev-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
        <p class="rev-text" data-i18n="review2">"Best handyman in LA. Upfront pricing, no surprises. Called me back within 10 mins!"</p>
        <div class="rev-date">Feb 2026</div>
      </div>

      <!-- Card 3 -->
      <div class="rev-card">
        <div class="rev-card-top">
          <div class="rev-avatar rev-av3">JL</div>
          <div class="rev-info">
            <div class="rev-name">Jessica L.</div>
            <div class="rev-loc">Los Feliz, 90027</div>
          </div>
          <svg class="rev-glogo" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
        </div>
        <div class="rev-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
        <p class="rev-text" data-i18n="review3">"Perfect furniture assembly! Professional, insured, and super reliable. Will call again!"</p>
        <div class="rev-date">Feb 2026</div>
      </div>
    </div>
    <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:20px">
      <a href="/review" target="_blank" rel="noopener" style="display:inline-flex;align-items:center;gap:8px;padding:11px 16px;background:#2d2d2d;color:#fff;border-radius:999px;text-decoration:none;font-weight:700" data-event="review_click_header" data-i18n="reviewCtaBtn">‚≠ê Leave a Google Review</a>
      <a href="/fb" target="_blank" rel="noopener" style="display:inline-flex;align-items:center;gap:8px;padding:11px 16px;background:#1877F2;color:#fff;border-radius:999px;text-decoration:none;font-weight:700" data-event="review_fb_click_header" data-i18n="reviewCtaFbBtn">üëç Recommend on Facebook</a>
    </div>
    <p style="margin:10px 0 0;text-align:center;color:var(--ink3);font-size:13px" data-i18n="reviewCtaHint">Your honest feedback helps local families choose trusted help faster.</p>
  </div>
</div>

<!-- LEAD CAPTURE FORM SECTION -->
<div style="background:linear-gradient(135deg,#B8892C 0%,#A0752A 100%);padding:64px 18px;text-align:center;margin-top:40px">
  <div style="max-width:600px;margin:0 auto">
    <h2 style="color:#fff;font-size:32px;font-weight:700;font-family:var(--fs);margin-bottom:12px" data-i18n="leadTitle">Ready to Book Your Service?</h2>
    <p style="color:rgba(255,255,255,0.90);font-size:16px;margin-bottom:32px" data-i18n="leadSub">Get a free quote in 2 minutes. No credit card required.</p>

    <form id="leadForm" style="background:rgba(255,255,255,0.95);padding:28px;border-radius:16px;display:flex;flex-direction:column;gap:16px" onsubmit="handleLeadSubmit(event)">
      <input type="text" id="leadName" placeholder="Your Name" data-i18n-placeholder="leadNamePlaceholder" required style="padding:14px 16px;border:1px solid var(--st);border-radius:10px;font-size:15px;font-family:inherit">

      <input type="email" id="leadEmail" placeholder="Your Email (optional)" data-i18n-placeholder="leadEmailPlaceholder" style="padding:14px 16px;border:1px solid var(--st);border-radius:10px;font-size:15px;font-family:inherit">

      <input type="tel" id="leadPhone" placeholder="Phone Number (213-361-1700)" data-i18n-placeholder="leadPhonePlaceholder" required style="padding:14px 16px;border:1px solid var(--st);border-radius:10px;font-size:15px;font-family:inherit">

      <input type="text" id="leadZip" placeholder="ZIP Code (e.g. 90034)" style="padding:14px 16px;border:1px solid var(--st);border-radius:10px;font-size:15px;font-family:inherit">

      <select id="leadPreferredContact" style="padding:14px 16px;border:1px solid var(--st);border-radius:10px;font-size:15px;font-family:inherit">
        <option value="call">Preferred Contact: Call</option>
        <option value="sms">Preferred Contact: SMS</option>
        <option value="whatsapp">Preferred Contact: WhatsApp</option>
      </select>

      <input type="hidden" id="leadPlacementId" value="">

      <select id="leadService" required style="padding:14px 16px;border:1px solid var(--st);border-radius:10px;font-size:15px;font-family:inherit">
        <option value="" data-i18n="leadServiceDefault">Select Service Needed</option>
        <option value="tv-mounting" data-i18n="leadServiceTv">üì∫ TV Mounting</option>
        <option value="furniture-assembly" data-i18n="leadServiceFurniture">üõãÔ∏è Furniture Assembly</option>
        <option value="painting" data-i18n="leadServicePainting">üé® Painting & Walls</option>
        <option value="flooring" data-i18n="leadServiceFlooring">üè† Flooring</option>
        <option value="plumbing" data-i18n="leadServicePlumbing">üö∞ Plumbing</option>
        <option value="electrical" data-i18n="leadServiceElectrical">‚ö° Electrical</option>
        <option value="mirrors" data-i18n="leadServiceMirrors">ü™û Mirrors & Art Hanging</option>
        <option value="other" data-i18n="leadServiceOther">‚úã Other Service</option>
      </select>

      <textarea id="leadMessage" placeholder="Brief description of your project..." data-i18n-placeholder="leadProjectPlaceholder" style="padding:14px 16px;border:1px solid var(--st);border-radius:10px;font-size:15px;font-family:inherit;min-height:80px;resize:none"></textarea>

      <div id="leadPhotosBox" style="border:2px dashed var(--st);border-radius:10px;padding:16px;text-align:center;cursor:pointer" onclick="document.getElementById('leadPhotos').click()">
        <input type="file" id="leadPhotos" accept="image/*" multiple required style="display:none">
        <p style="margin:0;font-size:14px;color:var(--ink2);font-weight:600">üì∏ Add Photos (Required)</p>
        <p style="margin:8px 0 0;font-size:12px;color:var(--ink3)">Click to upload photos of the job area</p>
        <p style="margin:6px 0 0;font-size:11px;color:var(--ink3)">Up to 6 photos. Helps us give accurate quotes.</p>
        <p id="leadPhotosStatus" style="margin:8px 0 0;font-size:12px;color:#2e7d32;display:none;font-weight:700"></p>
      </div>

      <button type="submit" style="padding:16px;background:linear-gradient(135deg,#1B2B4B 0%,#2B4A8C 100%);color:#fff;border:none;border-radius:999px;font-weight:700;font-size:16px;cursor:pointer;transition:all 200ms;box-shadow:0 8px 28px rgba(27,43,75,.40)" data-event="lead_submit">
        <span data-i18n="leadFormBtn">Get Your Quote in 2 Min</span>
      </button>

      <p style="font-size:12px;color:var(--ink3);margin:0" data-i18n="leadFormNote">
        No spam. We only contact you to confirm the job.
      </p>
    </form>

    <div id="formSuccess" style="display:none;background:#fff;padding:28px;border-radius:16px;margin-top:20px;text-align:center">
      <div style="font-size:48px;margin-bottom:12px">‚úÖ</div>
      <h3 style="color:var(--ink);font-weight:700;margin-bottom:8px" data-i18n="formSuccessTitle">Quote Request Received!</h3>
      <p style="color:var(--ink2);font-size:15px;margin-bottom:16px" data-i18n="formSuccessSub">We'll call you within 10 minutes to confirm your booking.</p>
      <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin:0 0 14px">
        <a href="tel:+12133611700" style="display:inline-flex;align-items:center;gap:8px;padding:10px 16px;background:#2d2d2d;color:#fff;border-radius:999px;text-decoration:none;font-weight:700">üìû Call</a>
        <a href="https://wa.me/12133611700?text=Hi%20Handy%20%26%20Friend%2C%20I%20just%20submitted%20a%20quote%20request" style="display:inline-flex;align-items:center;gap:8px;padding:10px 16px;background:#25D366;color:#fff;border-radius:999px;text-decoration:none;font-weight:700">üí¨ WhatsApp</a>
      </div>
      <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin:0 0 14px">
        <a href="/review" target="_blank" rel="noopener" style="display:inline-flex;align-items:center;gap:8px;padding:10px 16px;background:#1f4f9f;color:#fff;border-radius:999px;text-decoration:none;font-weight:700" data-event="review_click_form_success" data-i18n="formSuccessReviewBtn">‚≠ê Leave a Google Review</a>
        <a href="/fb" target="_blank" rel="noopener" style="display:inline-flex;align-items:center;gap:8px;padding:10px 16px;background:#1877F2;color:#fff;border-radius:999px;text-decoration:none;font-weight:700" data-event="review_fb_click_form_success" data-i18n="formSuccessFbBtn">üëç Recommend on Facebook</a>
      </div>
      <p style="color:var(--ink3);font-size:13px;margin-bottom:10px" data-i18n="formSuccessReviewHint">If everything looks great, a quick review helps us grow.</p>
      <p style="color:var(--ink3);font-size:13px" data-i18n="formSuccessEmail">Check your email for confirmation details.</p>
    </div>
  </div>
</div>

<!-- FAQ SECTION -->
<div style="padding:64px 18px;background:#f9f7f4">
  <div style="max-width:900px;margin:0 auto">
    <div style="text-align:center;margin-bottom:40px">
      <h2 style="font-size:32px;font-weight:700;font-family:var(--fs);color:var(--ink);margin-bottom:12px" data-i18n="faqTitle">Common Questions</h2>
      <p style="color:var(--ink2);font-size:16px" data-i18n="faqSub">Everything you need to know</p>
    </div>

    <div style="display:grid;gap:16px">
      <details style="padding:20px;background:#fff;border-radius:12px;border:1px solid var(--st);cursor:pointer">
        <summary style="font-weight:700;color:var(--ink);user-select:none" data-i18n="faqQ1">How quickly can you respond to my service request?</summary>
        <p style="margin-top:12px;color:var(--ink2);line-height:1.6" data-i18n="faqA1">Most calls are answered within 10 minutes. We're available 8am-8pm daily. For urgent same-day service, call 213-361-1700 directly.</p>
      </details>

      <details style="padding:20px;background:#fff;border-radius:12px;border:1px solid var(--st);cursor:pointer">
        <summary style="font-weight:700;color:var(--ink);user-select:none" data-i18n="faqQ2">Do you charge for estimates/quotes?</summary>
        <p style="margin-top:12px;color:var(--ink2);line-height:1.6" data-i18n="faqA2">No! All quotes are 100% free. We provide transparent, upfront pricing. No hidden fees. No credit card required.</p>
      </details>

      <details style="padding:20px;background:#fff;border-radius:12px;border:1px solid var(--st);cursor:pointer">
        <summary style="font-weight:700;color:var(--ink);user-select:none" data-i18n="faqQ3">Are you licensed and insured?</summary>
        <p style="margin-top:12px;color:var(--ink2);line-height:1.6" data-i18n="faqA3">Yes! We are fully licensed and insured. All work is guaranteed. If you're not 100% happy, we'll make it right.</p>
      </details>

      <details style="padding:20px;background:#fff;border-radius:12px;border:1px solid var(--st);cursor:pointer">
        <summary style="font-weight:700;color:var(--ink);user-select:none" data-i18n="faqQ4">What if I'm not satisfied with the work?</summary>
        <p style="margin-top:12px;color:var(--ink2);line-height:1.6" data-i18n="faqA4">100% satisfaction guarantee. If you're unhappy, we'll redo the work for free within 7 days. Your satisfaction is our priority.</p>
      </details>

      <details style="padding:20px;background:#fff;border-radius:12px;border:1px solid var(--st);cursor:pointer">
        <summary style="font-weight:700;color:var(--ink);user-select:none" data-i18n="faqQ5">Do you offer weekend or after-hours service?</summary>
        <p style="margin-top:12px;color:var(--ink2);line-height:1.6" data-i18n="faqA5">Yes! We offer flexible scheduling. Call 213-361-1700 to arrange weekend or evening appointments.</p>
      </details>

      <details style="padding:20px;background:#fff;border-radius:12px;border:1px solid var(--st);cursor:pointer">
        <summary style="font-weight:700;color:var(--ink);user-select:none" data-i18n="faqQ6">What payment methods do you accept?</summary>
        <p style="margin-top:12px;color:var(--ink2);line-height:1.6" data-i18n="faqA6">We accept cash, Venmo, PayPal, and all major credit cards. Payment is due upon completion of work.</p>
      </details>
    </div>
  </div>
</div>

<!-- FINAL CTA SECTION -->
<div style="background:var(--ink);padding:48px 18px;text-align:center">
  <div style="max-width:800px;margin:0 auto">
    <h2 style="color:#fff;font-size:28px;font-weight:700;font-family:var(--fs);margin-bottom:16px" data-i18n="finalCtaTitle">Don't Wait‚ÄîBook Your Handyman Today</h2>
    <p style="color:rgba(255,255,255,0.80);font-size:16px;margin-bottom:24px" data-i18n="finalCtaSub">Professional service, guaranteed satisfaction. 500+ happy customers in LA.</p>

    <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
      <a href="https://wa.me/12133611700?text=I%20want%20to%20book%20a%20service%20this%20week" style="display:inline-flex;align-items:center;gap:8px;padding:16px 28px;background:#25D366;color:#fff;border-radius:999px;font-weight:700;text-decoration:none;transition:opacity 200ms" data-event="final_cta_whatsapp" data-i18n="finalCtaWhatsApp">
        üí¨ Message on WhatsApp
      </a>
      <a href="tel:+12133611700" style="display:inline-flex;align-items:center;gap:8px;padding:16px 28px;background:rgba(255,255,255,0.15);color:#fff;border-radius:999px;font-weight:700;text-decoration:none;transition:background 200ms;border:1.5px solid rgba(255,255,255,0.30)" data-event="final_cta_call" data-i18n="finalCtaCall">
        üìû Call Now
      </a>
    </div>
  </div>
</div>

<script>
async function handleLeadSubmit(e) {
  e.preventDefault();
  const ui = (typeof window.HF_UI === 'function') ? window.HF_UI() : {};

  const name = document.getElementById('leadName').value;
  const email = document.getElementById('leadEmail').value;
  const phone = document.getElementById('leadPhone').value;
  const zip = document.getElementById('leadZip').value;
  const preferredContact = document.getElementById('leadPreferredContact').value;
  const service = document.getElementById('leadService').value;
  const message = document.getElementById('leadMessage').value;
  const attachmentFiles = Array.from(document.getElementById('leadPhotos')?.files || []).slice(0, 6);
  const attachments = attachmentFiles.map((file) => ({
    name: file.name || 'photo.jpg',
    type: file.type || 'image/jpeg',
    size: Number(file.size || 0)
  }));

  const formId = 'leadForm';
  let recaptchaToken = '';
  if (window.HF_RECAPTCHA_SITE_KEY) {
    if (!(window.grecaptcha && window.grecaptcha.execute)) {
      alert(ui.leadSubmitError || 'Security check is loading. Please retry in a few seconds.');
      return;
    }
    try {
      recaptchaToken = await new Promise((resolve, reject) => {
        window.grecaptcha.ready(function() {
          window.grecaptcha.execute(window.HF_RECAPTCHA_SITE_KEY, { action: 'lead_submit' })
            .then(resolve)
            .catch(reject);
        });
      });
    } catch (err) {
      alert(ui.leadSubmitError || 'Security verification failed. Please try again.');
      return;
    }
  }

  // Track pixel event
  if (typeof fbq !== 'undefined') {
    fbq('track', 'Lead', {
      'event_category': 'conversion',
      'event_label': service,
      'phone_number': phone,
      'email': email,
      'value': 1
    });
  }

  try {
    // Send lead to our own Vercel serverless endpoint (emails via Resend)
    const submitResponse = await fetch('/api/submit-lead', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        name: name,
        email: email,
        phone: phone,
        zip: zip,
        preferredContact: preferredContact,
        service: service,
        message: message,
        attachments,
        attribution: collectLeadAttribution(),
        lang: (document.documentElement.lang || 'en').toLowerCase(),
        timestamp: new Date().toISOString(),
        recaptchaToken: recaptchaToken,
        recaptchaAction: 'lead_submit',
        _subject: `New Quote Request: ${service} from ${name}`,
        _replyto: email
      })
    });

    const submitData = await submitResponse.json().catch(() => ({}));
    if (!submitResponse.ok || !submitData.success) {
      alert(ui.leadSubmitError || 'Error submitting form. Please call 213-361-1700 directly.');
      return;
    }

    const leadId = submitData.leadId || `lead_client_${Date.now()}`;

    // Hide form, show success
    document.getElementById('leadForm').style.display = 'none';
    document.getElementById('formSuccess').style.display = 'block';

    console.log('Lead captured:', { name, email, phone, service, leadId });
    emitCoreEvent('form_submit', {
      form_id: formId,
      form_name: 'Lead Form',
      service: service || 'unknown'
    });

    const photoFiles = attachmentFiles;
    if (photoFiles.length > 0) {
      const preparedPhotos = await preparePhotosForUpload(photoFiles);
      if (preparedPhotos.length > 0) {
        uploadLeadPhotos({
          leadId,
          photos: preparedPhotos
        }).catch(err => console.log('Lead photo upload failed:', err));
      }
    }
  } catch (err) {
    alert(ui.leadSubmitError || 'Error submitting form. Please call 213-361-1700 directly.');
    console.error(err);
  }
}

function collectLeadAttribution() {
  const params = new URLSearchParams(window.location.search || '');
  const clickId = {
    fbclid: params.get('fbclid') || '',
    gclid: params.get('gclid') || '',
    msclkid: params.get('msclkid') || '',
    ttclid: params.get('ttclid') || '',
    gbraid: params.get('gbraid') || '',
    wbraid: params.get('wbraid') || ''
  };
  return {
    pageUrl: window.location.href,
    referrer: document.referrer || 'direct',
    utmSource: params.get('utm_source') || '',
    utmMedium: params.get('utm_medium') || '',
    utmCampaign: params.get('utm_campaign') || '',
    utmContent: params.get('utm_content') || '',
    utmTerm: params.get('utm_term') || '',
    placementId: params.get('placement_id') || document.getElementById('leadPlacementId')?.value || '',
    clickId,
    landingPath: window.location.pathname || '/',
    lang: (document.documentElement.lang || 'en').toLowerCase()
  };
}
async function preparePhotosForUpload(files) {
  const prepared = [];
  for (const file of files) {
    try {
      const dataUrl = await compressImage(file, 960, 0.62);
      prepared.push({
        name: file.name || `photo_${Date.now()}.jpg`,
        mimeType: 'image/jpeg',
        dataUrl
      });
    } catch (err) {
      console.error('Photo compress failed:', err);
    }
  }
  return prepared;
}

async function uploadLeadPhotos(payload) {
  const { leadId, photos } = payload;
  await fetch('/api/upload-lead-photos', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      leadId,
      photos
    })
  });
}

function compressImage(file, maxWidth, quality) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => {
      const img = new Image();
      img.onload = () => {
        const scale = Math.min(1, maxWidth / img.width);
        const canvas = document.createElement('canvas');
        canvas.width = Math.round(img.width * scale);
        canvas.height = Math.round(img.height * scale);
        const ctx = canvas.getContext('2d');
        if (!ctx) {
          reject(new Error('Canvas context unavailable'));
          return;
        }
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
        resolve(canvas.toDataURL('image/jpeg', quality));
      };
      img.onerror = () => reject(new Error('Image decode failed'));
      img.src = String(reader.result || '');
    };
    reader.onerror = () => reject(new Error('File read failed'));
    reader.readAsDataURL(file);
  });
}

// Track form interactions
document.getElementById('leadForm')?.addEventListener('input', (e) => {
  if (typeof fbq !== 'undefined') {
    fbq('track', 'ViewContent', {
      'event_category': 'engagement',
      'content_name': 'Lead Form - User Started Filling',
      'content_type': 'form'
    });
  }
});

// Service-specific placeholders
const servicePlaceholders = {
  'tv-mounting': "TV size & weight? Wall studs available? Want hidden cables?",
  'furniture-assembly': "What furniture? How many pieces? Flatpack or assembled?",
  'painting': "Square footage? New color? Any wall damage or prep needed?",
  'plumbing': "Which fixture? Any leaks or damage?",
  'electrical': "How many outlets/switches? Smart devices?",
  'flooring': "Square footage? Material type? Need demo?",
  'mirrors': "Number of pieces? Total weight? Wall type (drywall/studs)?",
  'other': "Tell us what you need help with!"
};

// Update placeholder when service changes
document.getElementById('leadService')?.addEventListener('change', (e) => {
  const service = e.target.value;
  const messageField = document.getElementById('leadMessage');
  if (messageField && servicePlaceholders[service]) {
    messageField.placeholder = servicePlaceholders[service];
  }
});

// Handle photo upload change
document.getElementById('leadPhotos')?.addEventListener('change', (e) => {
  const photosStatus = document.getElementById('leadPhotosStatus');
  const photoInput = document.getElementById('leadPhotos');
  if (!photoInput || !photosStatus) return;
  if (photoInput.files && photoInput.files.length > 6) {
    alert('Please select up to 6 photos.');
    photoInput.value = '';
    photosStatus.style.display = 'none';
    return;
  }
  const fileCount = e.target.files.length;
  if (fileCount > 0) {
    photosStatus.textContent = `‚úÖ ${fileCount} photo${fileCount !== 1 ? 's' : ''} selected`;
    photosStatus.style.display = 'block';
  } else {
    photosStatus.style.display = 'none';
  }
});

(() => {
  const params = new URLSearchParams(window.location.search || '');
  const placement = params.get('placement_id') || '';
  const input = document.getElementById('leadPlacementId');
  if (input) input.value = placement;
})();
</script>

<!-- LEGAL DISCLAIMER & FOOTER -->
<footer style="background:#2A1F14;padding:48px 18px;margin-top:60px">
  <div style="max-width:1200px;margin:0 auto">
    <!-- Main Footer Content -->
    <div style="display:grid;grid-template-columns:1fr;gap:40px;margin-bottom:40px">
      <!-- Column 1: About -->
      <div>
        <h3 style="color:#B8892C;font-size:14px;font-weight:700;margin-bottom:12px;letter-spacing:.05em;text-transform:uppercase">About</h3>
        <p style="color:rgba(255,255,255,0.75);font-size:13px;line-height:1.6;margin:0">
          Handy & Friend is Los Angeles's trusted handyman service. We provide labor-only home repair services with transparent pricing and professional craftsmanship.
        </p>
      </div>

      <!-- Column 2: Services -->
      <div>
        <h3 style="color:#B8892C;font-size:14px;font-weight:700;margin-bottom:12px;letter-spacing:.05em;text-transform:uppercase">Services</h3>
        <p style="color:rgba(255,255,255,0.75);font-size:13px;line-height:1.6;margin:0">
          TV Mounting ‚Ä¢ Furniture Assembly ‚Ä¢ Painting ‚Ä¢ Flooring ‚Ä¢ Plumbing ‚Ä¢ Electrical ‚Ä¢ Art & Mirror Hanging
        </p>
      </div>

      <!-- Column 3: Contact -->
      <div>
        <h3 style="color:#B8892C;font-size:14px;font-weight:700;margin-bottom:12px;letter-spacing:.05em;text-transform:uppercase">Contact</h3>
        <p style="color:rgba(255,255,255,0.75);font-size:13px;line-height:1.6;margin:0">
          <a href="tel:+12133611700" style="color:#B8892C;text-decoration:none;font-weight:700">üìû Call 213-361-1700</a><br>
          <a href="https://wa.me/12133611700" style="color:#25D366;text-decoration:none;font-weight:700">üí¨ WhatsApp Message</a>
        </p>
      </div>

      <!-- Column 4: Follow Us -->
      <div>
        <h3 style="color:#B8892C;font-size:14px;font-weight:700;margin-bottom:12px;letter-spacing:.05em;text-transform:uppercase">Follow Us</h3>
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <a href="https://www.facebook.com/profile.php?id=61588215297678" target="_blank" rel="noopener" style="display:inline-flex;align-items:center;gap:6px;padding:8px 14px;background:#1877F2;color:#fff;border-radius:8px;text-decoration:none;font-size:13px;font-weight:600;transition:opacity 200ms" data-event="footer_facebook">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="#fff"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
            Facebook
          </a>
          <a href="https://g.co/kgs/handyandfriend" target="_blank" rel="noopener" style="display:inline-flex;align-items:center;gap:6px;padding:8px 14px;background:#fff;color:#333;border-radius:8px;text-decoration:none;font-size:13px;font-weight:600;transition:opacity 200ms" data-event="footer_google">
            <svg width="16" height="16" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
            Google
          </a>
        </div>
      </div>
    </div>

    <!-- Legal Disclaimer -->
    <div style="background:rgba(255,255,255,0.05);padding:24px;border-radius:12px;margin-bottom:32px">
      <h4 style="color:#B8892C;font-size:12px;font-weight:700;margin-bottom:10px;letter-spacing:.05em;text-transform:uppercase">Legal Disclaimer</h4>
      <p style="color:rgba(255,255,255,0.70);font-size:12px;line-height:1.7;margin:0">
        <strong>Handy & Friend</strong> provides cosmetic maintenance and minor handyman services under California minor work exemption rules. We are <strong>not a state licensed contractor</strong>. Projects must remain under <strong>$1,000 total</strong> (labor + materials + all items) and must not require permits. For permit-required, structural, or licensed trade work (C-10/C-36/C-33/B), we provide referral to a licensed contractor. Materials, parking, and disposal are billed separately unless stated in writing.
      </p>
    </div>

    <!-- Copyright & Links -->
    <div style="border-top:1px solid rgba(255,255,255,0.1);padding-top:24px;text-align:center">
      <p style="color:rgba(255,255,255,0.60);font-size:12px;margin:0 0 16px 0;line-height:1.6">
        ¬© 2026 Handy & Friend. All rights reserved.
      </p>
      <div style="display:flex;justify-content:center;gap:24px;flex-wrap:wrap">
        <a href="/privacy" style="color:rgba(255,255,255,0.60);font-size:11px;text-decoration:none;transition:color 200ms">Privacy Policy</a>
        <a href="/terms" style="color:rgba(255,255,255,0.60);font-size:11px;text-decoration:none;transition:color 200ms">Terms of Service</a>
        <a href="#" style="color:rgba(255,255,255,0.60);font-size:11px;text-decoration:none;transition:color 200ms">Contact Us</a>
      </div>
    </div>
  </div>
</footer>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     AI CHAT WIDGET ‚Äî BLOCK 2 (DeepSeek Sales Bot)
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<style>
@keyframes wave{0%{transform:rotate(0deg)}10%{transform:rotate(14deg)}20%{transform:rotate(-8deg)}30%{transform:rotate(14deg)}40%{transform:rotate(-4deg)}50%{transform:rotate(10deg)}60%{transform:rotate(0deg)}100%{transform:rotate(0deg)}}
@keyframes float{0%,100%{transform:translateY(0px)}50%{transform:translateY(-8px)}}
#hf-chat-btn{position:fixed;bottom:24px;right:24px;z-index:9000;width:70px;height:70px;border-radius:50%;background:linear-gradient(135deg,#FF6B9D 0%,#FF85C0 50%,#FFB3D9 100%);border:3px solid #fff;cursor:grab;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 32px rgba(255,107,157,.5);transition:transform .2s,box-shadow .2s;font-weight:700;color:#fff;font-size:14px;font-family:inherit;padding:0;animation:float 3s ease-in-out infinite;user-select:none;-webkit-user-select:none}
#hf-chat-btn:hover{transform:scale(1.1);box-shadow:0 12px 48px rgba(255,107,157,.7)}
#hf-chat-btn:active{cursor:grabbing}
#hf-chat-btn svg{width:20px;height:20px;fill:#fff;flex-shrink:0}
#hf-chat-badge{position:absolute;top:-8px;right:-8px;background:#FF2D55;color:#fff;font-size:12px;font-weight:800;border-radius:50%;width:24px;height:24px;display:none;align-items:center;justify-content:center;border:3px solid #fff;box-shadow:0 2px 8px rgba(255,45,85,.6)}
#hf-chat-badge.show{display:flex}
#hf-chat-panel{position:fixed;bottom:94px;right:24px;z-index:9000;width:360px;max-width:calc(100vw - 32px);background:#fff;border-radius:16px;box-shadow:0 8px 40px rgba(0,0,0,.22);display:none;flex-direction:column;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;max-height:520px}
#hf-chat-panel.open{display:flex}
#hf-chat-header{background:#1e2a3b;color:#fff;padding:14px 16px;display:flex;align-items:center;gap:10px;flex-shrink:0}
#hf-chat-header .av{width:36px;height:36px;border-radius:50%;background:#b88924;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:15px;flex-shrink:0}
#hf-chat-header .info{flex:1;min-width:0}
#hf-chat-header .name{font-weight:700;font-size:14px}
#hf-chat-header .sub{font-size:11px;opacity:.7;margin-top:1px}
#hf-chat-close{background:none;border:none;color:rgba(255,255,255,.7);cursor:pointer;font-size:20px;padding:2px 4px;line-height:1;flex-shrink:0}
#hf-chat-close:hover{color:#fff}
#hf-chat-msgs{flex:1;overflow-y:auto;padding:14px 12px;display:flex;flex-direction:column;gap:8px;background:#f7f7f8}
.hf-msg{max-width:82%;font-size:13.5px;line-height:1.5;padding:9px 13px;border-radius:14px;word-break:break-word}
.hf-msg.bot{background:#fff;color:#1e2a3b;border:1px solid #e8e8ec;align-self:flex-start;border-bottom-left-radius:4px}
.hf-msg.usr{background:#1e2a3b;color:#fff;align-self:flex-end;border-bottom-right-radius:4px}
.hf-msg.sys{background:#fffbe8;color:#7a6010;border:1px solid #f0d88a;align-self:center;font-size:12px;text-align:center;border-radius:8px;padding:7px 12px}
.hf-typing{display:flex;gap:4px;align-items:center;padding:10px 13px;background:#fff;border:1px solid #e8e8ec;border-radius:14px;border-bottom-left-radius:4px;width:52px;align-self:flex-start}
.hf-dot{width:7px;height:7px;background:#b88924;border-radius:50%;animation:hfbounce 1.2s ease-in-out infinite}
.hf-dot:nth-child(2){animation-delay:.2s}
.hf-dot:nth-child(3){animation-delay:.4s}
@keyframes hfbounce{0%,80%,100%{transform:scale(0.6);opacity:.4}40%{transform:scale(1);opacity:1}}
#hf-chat-footer{padding:10px 12px;border-top:1px solid #eee;display:flex;gap:8px;flex-shrink:0;background:#fff}
#hf-chat-photo-btn{transition:background .15s}
#hf-chat-photo-btn:hover{background:#d8d8d8}
#hf-chat-photo-btn:active{background:#c8c8c8}
.hf-photo-thumb{width:60px;height:60px;border-radius:8px;object-fit:cover;border:1px solid #ddd;position:relative;cursor:pointer}
.hf-photo-thumb-wrapper{position:relative;width:60px;height:60px}
.hf-photo-remove{position:absolute;top:-6px;right:-6px;background:#e04040;color:#fff;border:none;border-radius:50%;width:20px;height:20px;padding:0;cursor:pointer;font-size:13px;font-weight:700;display:flex;align-items:center;justify-content:center;line-height:1}
#hf-chat-input{flex:1;border:1.5px solid #ddd;border-radius:22px;padding:8px 14px;font-size:13.5px;outline:none;resize:none;font-family:inherit;line-height:1.4;max-height:80px;overflow-y:auto}
#hf-chat-input:focus{border-color:#1e2a3b}
#hf-chat-send{width:38px;height:38px;border-radius:50%;background:#b88924;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;align-self:flex-end;transition:background .15s}
#hf-chat-send:hover{background:#9a7318}
#hf-chat-send svg{width:17px;height:17px;fill:#fff}
@media(max-width:400px){#hf-chat-panel{width:calc(100vw - 16px);right:8px;bottom:86px}#hf-chat-btn{right:16px;bottom:16px;width:64px;height:64px}}
</style>

<!-- Chat button -->
<button id="hf-chat-btn" aria-label="Chat with Alex" onclick="hfChatToggle()" title="Chat with Alex! üëã">
  <img id="hf-char-wave" loading="lazy" src="assets/img/alex-avatar.png" alt="Alex" style="width:100%;height:100%;border-radius:50%;object-fit:cover;animation:wave 0.6s ease-in-out infinite;display:block;cursor:grab">
  <span id="hf-chat-badge">1</span>
</button>

<!-- Chat panel -->
<div id="hf-chat-panel">
  <div id="hf-chat-header">
    <div class="av">A</div>
    <div class="info">
      <div class="name">Alex ¬∑ Handy &amp; Friend</div>
      <div class="sub" id="hf-chat-status">Online ¬∑ Replies instantly</div>
    </div>
    <button id="hf-chat-close" onclick="hfChatToggle()" aria-label="Close">√ó</button>
  </div>
  <div id="hf-chat-msgs"></div>
  <div id="hf-chat-photo-preview" style="padding:8px 12px;display:none;gap:8px;flex-wrap:wrap;background:#f7f7f8;border-top:1px solid #eee;max-height:100px;overflow-y:auto;"></div>
  <div id="hf-chat-footer">
    <button id="hf-chat-photo-btn" type="button" aria-label="Add photos" title="Add photos" style="width:38px;height:38px;border-radius:50%;background:#e8e8e8;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:18px;padding:0;">
      üì∑
    </button>
    <input type="file" id="hf-chat-photo-input" accept="image/*" multiple style="display:none">
    <textarea id="hf-chat-input" rows="1" placeholder="Type your question‚Ä¶"></textarea>
    <button id="hf-chat-send" onclick="hfSend()" aria-label="Send">
      <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
    </button>
  </div>
</div>

<script>
(function(){
  var GREET = {
    en:"Hi! I'm Alex üëã I help with quotes for painting, flooring, TV mounting, plumbing, and more. What can we help you with today?",
    ru:"–ü—Ä–∏–≤–µ—Ç! –Ø –ê–ª–µ–∫—Å üëã –ü–æ–º–æ–≥–∞—é —Å —Ä–∞—Å—á—ë—Ç–æ–º —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–∫—Ä–∞—Å–∫–∏, –ø–æ–ª–æ–≤, –º–æ–Ω—Ç–∞–∂–∞ –¢–í, —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∏ –∏ –¥—Ä—É–≥–∏—Ö —Ä–∞–±–æ—Ç. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?",
    uk:"–ü—Ä–∏–≤—ñ—Ç! –Ø –ê–ª–µ–∫—Å üëã –î–æ–ø–æ–º–∞–≥–∞—é –∑ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–º –≤–∞—Ä—Ç–æ—Å—Ç—ñ –ø–æ–∫—Ä–∞—Å–∫–∏, –ø—ñ–¥–ª–æ–≥–∏, –º–æ–Ω—Ç–∞–∂—É –¢–í, —Å–∞–Ω—Ç–µ—Ö–Ω—ñ–∫–∏ —Ç–∞ —ñ–Ω—à–∏—Ö —Ä–æ–±—ñ—Ç. –ß–∏–º –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏?",
    es:"¬°Hola! Soy Alex üëã Ayudo con cotizaciones de pintura, pisos, montaje de TV, plomer√≠a y m√°s. ¬øEn qu√© puedo ayudarte hoy?"
  };
  var PLACEHOLDER = {
    en:"Type your question‚Ä¶",ru:"–í–∞—à –≤–æ–ø—Ä–æ—Å‚Ä¶",uk:"–í–∞—à–µ –ø–∏—Ç–∞–Ω–Ω—è‚Ä¶",es:"Tu pregunta‚Ä¶"
  };
  var LEAD_MSG = {
    en:"‚úÖ Your request has been saved! Our team will call you within 1 hour (Mon‚ÄìSat 8am‚Äì8pm PT).",
    ru:"‚úÖ –í–∞—à–∞ –∑–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞! –ü–æ–∑–≤–æ–Ω–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞ (–ø–Ω‚Äì—Å–± 8:00‚Äì20:00 PT).",
    uk:"‚úÖ –í–∞—à—É –∑–∞—è–≤–∫—É –ø—Ä–∏–π–Ω—è—Ç–æ! –ü–æ–¥–∑–≤–æ–Ω–∏–º–æ –ø—Ä–æ—Ç—è–≥–æ–º –≥–æ–¥–∏–Ω–∏ (–ø–Ω‚Äì—Å–± 8:00‚Äì20:00 PT).",
    es:"‚úÖ ¬°Solicitud recibida! Nuestro equipo le llamar√° en 1 hora (lun‚Äìs√°b 8am‚Äì8pm PT)."
  };

  var msgs = [];
  var greeted = false;
  var leadCaptured = false;
  var busy = false;
  var panelOpen = false;
  var badgeShown = false;
  var chatPhotos = [];

  function getLang(){
    return (document.documentElement.lang||'en').slice(0,2)||'en';
  }

  function getSession(){
    var k = 'hf_sid';
    var s = localStorage.getItem(k);
    if(!s){s='s'+Date.now()+'_'+Math.random().toString(36).slice(2,7);localStorage.setItem(k,s);}
    return s;
  }

  window.hfChatToggle = function(){
    panelOpen = !panelOpen;
    var panel = document.getElementById('hf-chat-panel');
    panel.classList.toggle('open', panelOpen);
    if(panelOpen){
      hideBadge();
      if(!greeted) greet();
      setTimeout(function(){document.getElementById('hf-chat-input').focus();},200);
    }
  };

  function greet(){
    greeted = true;
    var lang = getLang();
    addMsg('bot', GREET[lang]||GREET.en);
  }

  function addMsg(role, text){
    msgs.push({role: role==='bot'?'assistant':'user', content: text});
    renderMsg(role, text);
  }

  function renderMsg(role, text){
    var box = document.getElementById('hf-chat-msgs');
    var d = document.createElement('div');
    d.className = 'hf-msg ' + (role==='bot'?'bot':role==='sys'?'sys':'usr');
    d.textContent = text;
    box.appendChild(d);
    box.scrollTop = box.scrollHeight;
  }

  function showTyping(){
    var box = document.getElementById('hf-chat-msgs');
    var t = document.createElement('div');
    t.className = 'hf-typing';
    t.id = 'hf-typing';
    t.innerHTML = '<div class="hf-dot"></div><div class="hf-dot"></div><div class="hf-dot"></div>';
    box.appendChild(t);
    box.scrollTop = box.scrollHeight;
  }

  function hideTyping(){
    var t = document.getElementById('hf-typing');
    if(t) t.remove();
  }

  function showBadge(){
    if(badgeShown||panelOpen) return;
    badgeShown = true;
    document.getElementById('hf-chat-badge').classList.add('show');
  }

  function hideBadge(){
    badgeShown = false;
    document.getElementById('hf-chat-badge').classList.remove('show');
  }

  function updatePhotoPreview(){
    var preview = document.getElementById('hf-chat-photo-preview');
    preview.innerHTML = '';
    chatPhotos.forEach(function(photo, idx){
      var wrapper = document.createElement('div');
      wrapper.className = 'hf-photo-thumb-wrapper';
      var img = document.createElement('img');
      img.src = photo.dataUrl;
      img.className = 'hf-photo-thumb';
      var btn = document.createElement('button');
      btn.className = 'hf-photo-remove';
      btn.textContent = '√ó';
      btn.type = 'button';
      btn.onclick = function(){
        chatPhotos.splice(idx, 1);
        updatePhotoPreview();
      };
      wrapper.appendChild(img);
      wrapper.appendChild(btn);
      preview.appendChild(wrapper);
    });
    preview.style.display = chatPhotos.length > 0 ? 'flex' : 'none';
  }

  document.getElementById('hf-chat-photo-btn').onclick = function(){
    document.getElementById('hf-chat-photo-input').click();
  };

  document.getElementById('hf-chat-photo-input').onchange = function(e){
    var files = e.target.files;
    for(var i=0; i<files.length; i++){
      var reader = new FileReader();
      reader.onload = function(event){
        chatPhotos.push({dataUrl: event.target.result, name: 'photo'});
        updatePhotoPreview();
      };
      reader.readAsDataURL(files[i]);
    }
    e.target.value = '';
  };

  window.hfSend = function(){
    if(busy||leadCaptured) return;
    var input = document.getElementById('hf-chat-input');
    var text = (input.value||'').trim();
    if(!text && chatPhotos.length === 0) return;
    input.value = '';
    input.style.height = '';
    var displayText = text || (chatPhotos.length > 0 ? 'üì∑ ' + chatPhotos.length + ' photo' + (chatPhotos.length > 1 ? 's' : '') : '');
    addMsg('usr', displayText);
    sendToAI(text, chatPhotos);
    chatPhotos = [];
    updatePhotoPreview();
  };

  function sendToAI(userText, photos){
    busy = true;
    showTyping();
    var lang = getLang();
    // Build messages array for API (exclude the message we just pushed to avoid dup)
    var history = msgs.slice(0,-1); // last message already added
    var userMsg = {role:'user', content:userText||''};
    if(photos && photos.length > 0){
      userMsg.photos = photos.map(function(p, idx){
        return {
          dataUrl: p.dataUrl,
          name: p.name || ('chat_photo_' + (idx + 1) + '.jpg')
        };
      });
    }
    history.push(userMsg);

    fetch('/api/ai-chat', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({
        sessionId: getSession(),
        messages: history,
        lang: lang
      })
    })
    .then(function(r){return r.json();})
    .then(function(data){
      hideTyping();
      busy = false;
      if(data.error){
        addMsg('bot','Sorry, I had a connection issue. Please try again or call us at (213) 361-1700.');
        return;
      }
      if(data.reply) addMsg('bot', data.reply);
      if(data.leadCaptured){
        leadCaptured = true;
        setTimeout(function(){
          renderMsg('sys', LEAD_MSG[lang]||LEAD_MSG.en);
          document.getElementById('hf-chat-input').disabled = true;
          document.getElementById('hf-chat-send').disabled = true;
          document.getElementById('hf-chat-status').textContent = '‚úÖ Request received';
        }, 600);
      }
    })
    .catch(function(){
      hideTyping();
      busy = false;
      addMsg('bot','Connection error. Please call us: (213) 361-1700.');
    });
  }

  // Enter to send, Shift+Enter for newline
  document.getElementById('hf-chat-input').addEventListener('keydown', function(e){
    if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();hfSend();}
  });

  /* ‚îÄ‚îÄ‚îÄ DRAGGABLE CHAT BUTTON ‚îÄ‚îÄ‚îÄ */
  (function(){
    var btn = document.getElementById('hf-chat-btn');
    var isDragging = false;
    var offsetX = 0, offsetY = 0;

    function startDrag(e){
      isDragging = true;
      var rect = btn.getBoundingClientRect();
      var clientX = e.touches ? e.touches[0].clientX : e.clientX;
      var clientY = e.touches ? e.touches[0].clientY : e.clientY;
      offsetX = clientX - rect.left;
      offsetY = clientY - rect.top;
      btn.style.cursor = 'grabbing';
    }

    function drag(e){
      if(!isDragging) return;
      e.preventDefault();
      var clientX = e.touches ? e.touches[0].clientX : e.clientX;
      var clientY = e.touches ? e.touches[0].clientY : e.clientY;
      var newLeft = clientX - offsetX;
      var newTop = clientY - offsetY;
      var maxLeft = window.innerWidth - btn.offsetWidth;
      var maxTop = window.innerHeight - btn.offsetHeight;
      newLeft = Math.max(0, Math.min(newLeft, maxLeft));
      newTop = Math.max(0, Math.min(newTop, maxTop));
      btn.style.position = 'fixed';
      btn.style.left = newLeft + 'px';
      btn.style.right = 'auto';
      btn.style.top = newTop + 'px';
      btn.style.bottom = 'auto';
    }

    function stopDrag(){
      isDragging = false;
      btn.style.cursor = 'grab';
    }

    btn.addEventListener('mousedown', startDrag);
    btn.addEventListener('touchstart', startDrag);
    document.addEventListener('mousemove', drag);
    document.addEventListener('touchmove', drag, {passive:false});
    document.addEventListener('mouseup', stopDrag);
    document.addEventListener('touchend', stopDrag);
  })();

  // Auto-grow textarea
  document.getElementById('hf-chat-input').addEventListener('input', function(){
    this.style.height='';
    this.style.height=Math.min(this.scrollHeight,80)+'px';
    document.getElementById('hf-chat-input').placeholder = PLACEHOLDER[getLang()]||PLACEHOLDER.en;
  });

  // Show badge after 4s if user hasn't opened chat
  setTimeout(function(){if(!panelOpen) showBadge();}, 4000);
})();
</script>
</body>
</html>
